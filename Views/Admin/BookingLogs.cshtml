@model IEnumerable<BHMS_Portal.Models.BookingLogViewModel>
@{
    ViewBag.Title = "Booking Logs";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";

}

<div class="card shadow-sm rounded-4">
    <div class="card-header bg-brown text-black d-flex justify-content-between align-items-center">
        <h2 class="mb-0">Booking Logs</h2>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table id="bookingLogsTable" class="table table-striped table-bordered mb-0" style="width:100%;">
                <thead>
                    <tr>
                        <th>Booking ID</th>
                        <th>User ID</th>
                        <th>Hut ID</th>
                        <th>Hut Name</th>
                        <th>Booking Date</th>
                        <th>Booking Status</th>
                        <th>User Full Name</th>
                        <th>User Decibel ID</th>
                        <th>User Email</th>
                        <th>User Department</th>
                        <th>User Grade</th>
                        <th>User Designation</th>
                        <th>User Mobile No</th>
                        <th>User CNIC</th>
                        <th>Nominee Name</th>
                        <th>Admin Approved</th>
                        <th>Admin Comments</th>
                        <th>HOD Approved</th>
                        <th>HOD Comments</th>
                        <th>Nominee Details ID</th>
                        <th>Nominee Full Name</th>
                        <th>Nominee Email</th>
                        <th>Nominee Department</th>
                        <th>Nominee Grade</th>
                        <th>Nominee Designation</th>
                        <th>Nominee Mobile No</th>
                        <th>Nominee CNIC</th>
                        <th>Head Of Department</th>
                        <th>Head Of Department ID</th>
                        <th>Head Of Department Email</th>
                        <th>Total Persons</th>
                        <th>Cost Of Hut</th>
                        <th>Has Additional Requirements</th>
                        <th>Additional Requirements</th>
                        <th>Cancellation Date</th>
                        <th>Cancelled By Admin</th>
                        <th>Cancelled By HOD</th>
                        <th>Penalty Amount</th>
                        <th>Total Maintenance Cost</th>
                        <th>Is Returned</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var log in Model)
                    {
                        <tr>
                            <td>@log.BookingId</td>
                            <td>@log.UserId</td>
                            <td>@log.HutId</td>
                            <td>@log.HutName</td>
                            <td>@log.BookingDate.ToString("yyyy-MM-dd")</td>
                            <td>@log.BookingStatus</td>
                            <td>@log.UserFullName</td>
                            <td>@log.UserDecibelId</td>
                            <td>@log.UserEmail</td>
                            <td>@log.UserDepartment</td>
                            <td>@log.UserGrade</td>
                            <td>@log.UserDesignation</td>
                            <td>@log.UserMobileNo</td>
                            <td>@log.UserCNIC</td>
                            <td>@log.NomineeName</td>
                            <td>@(log.IsAdminApproved == true ? "Yes" : "No")</td>
                            <td>@log.AdminComments</td>
                            <td>@(log.IsHODApproved == true ? "Yes" : "No")</td>
                            <td>@log.HODComments</td>
                            <td>@log.NomineeDetailsId</td>
                            <td>@log.NomineeFullName</td>
                            <td>@log.NomineeEmail</td>
                            <td>@log.NomineeDepartment</td>
                            <td>@log.NomineeGrade</td>
                            <td>@log.NomineeDesignation</td>
                            <td>@log.NomineeMobileNo</td>
                            <td>@log.NomineeCNIC</td>
                            <td>@log.HeadOfDepartment</td>
                            <td>@log.HeadOfDepartmentId</td>
                            <td>@log.HeadOfDepartmentEmail</td>
                            <td>@log.TotalPersonsForBooking</td>
                            <td>@log.BookingCostOfHut</td>
                            <td>@(log.BookingHasAdditionalRequirements == true ? "Yes" : "No")</td>
                            <td>@log.BookingAdditionalRequirements</td>
                            <td>@(log.BookingCancellationDate.HasValue ? log.BookingCancellationDate.Value.ToString("yyyy-MM-dd") : "")</td>
                            <td>@(log.CancelledByAdmin == true ? "Yes" : "No")</td>
                            <td>@(log.CancelledByHOD == true ? "Yes" : "No")</td>
                            <td>@log.PenaltyAmount</td>
                            <td>@log.TotalMaintenanceCost</td>
                            <td>@(log.IsReturned == true ? "Yes" : "No")</td>
                        </tr>


                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section scripts {

    @*<script>
        $(document).ready(function () {
            $('#bookingLogsTable').DataTable({
                scrollX: true,          // keep horizontal scrolling
                scrollY: '400px',       // fixed vertical height with vertical scroll
                scrollCollapse: true,   // allow table to reduce height if fewer rows
                paging: true,
                lengthChange: true,
                searching: true,
                ordering: true,
                info: true,
                autoWidth: false,
                order: [[2, "desc"]],
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]]
            });
        });

    </script>*@


    <script>
        $(document).ready(function () {
            $('#bookingLogsTable').DataTable({
                scrollX: true,          // keep horizontal scrolling
                scrollY: '400px',       // fixed vertical height with vertical scroll
                scrollCollapse: true,   // allow table to reduce height if fewer rows
                paging: true,
                lengthChange: true,
                searching: true,
                ordering: true,
                info: true,
                autoWidth: false,
                order: [[2, "desc"]],
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]]
            });
        });

    </script>
}
